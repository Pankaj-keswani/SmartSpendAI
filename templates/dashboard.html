<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SmartSpend Dashboard</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700;900&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
*{margin:0;padding:0;box-sizing:border-box}
body{
 background:#020617;
 color:white;
 font-family:'Poppins',sans-serif;
 overflow-x:hidden;
}

/* Animated BG */
body::before{
 content:"";
 position:fixed;inset:0;
 background:linear-gradient(120deg,#020617,#1e293b,#020617);
 animation:bgshift 20s infinite alternate;
 z-index:-3;
}
@keyframes bgshift{
 to{filter:hue-rotate(50deg)}
}

/* Mouse Glow */
.light{
 position:fixed;
 width:280px;height:280px;
 background:radial-gradient(circle,rgba(96,165,250,.25),transparent 65%);
 pointer-events:none;
 mix-blend-mode:screen;
 z-index:-1;
}

/* Navbar */
nav{
 position:sticky;top:0;
 padding:18px 22px;
 background:rgba(2,6,23,.75);
 backdrop-filter:blur(20px);
}

/* Cards */
.cards{
 display:grid;
 grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
 gap:16px;
 padding:20px;
}
.card{
 background:rgba(15,23,42,.85);
 padding:20px;
 border-radius:18px;
 box-shadow:0 0 35px rgba(99,102,241,.3);
 transition:.3s;
}
.card:hover{transform:translateY(-5px) scale(1.02)}

/* Table */
.big{
 margin:20px;
 background:rgba(15,23,42,.9);
 border-radius:18px;
 padding:16px;
 overflow-x:auto;
}
table{width:100%;min-width:700px;border-collapse:collapse}
th,td{padding:12px;font-size:13px}
th{background:#0f1a2f}

/* Chips */
.chip{padding:6px 10px;border-radius:10px;font-size:12px}
.shopping{background:#2563EB}
.food{background:#16A34A}
.transfer{background:#7C3AED}
.bills{background:#DC2626}
.others{background:#6B7280}
</style>
</head>

<body>

<div class="light" id="light"></div>

<nav>üí∏ SmartSpend <span style="color:#60a5fa">AI</span></nav>

<div class="cards">
 <div class="card">üí∞ Total Spend<br><b>‚Çπ {{ total_spend }}</b></div>
 <div class="card">üìÑ Transactions<br><b>{{ total_transactions }}</b></div>
 <div class="card">üèÜ Top Category<br><b>{{ top_category }}</b></div>
</div>

<div class="cards">
 <div class="card"><canvas id="pieChart"></canvas></div>
 <div class="card"><canvas id="barChart"></canvas></div>
</div>

<div class="big">
<table>
<tr><th>Date</th><th>Description</th><th>Amount</th><th>Category</th></tr>
{% for t in rows %}
<tr>
<td>{{ t['Transaction Date'] }}</td>
<td>{{ t['Description/Narration'] }}</td>
<td>‚Çπ {{ t['Amount'] }}</td>
<td>
<span class="chip
{% if t['AI Category']=="Shopping" %}shopping
{% elif t['AI Category']=="Food" %}food
{% elif t['AI Category']=="Money Transfer" %}transfer
{% elif t['AI Category']=="Bills" %}bills
{% else %}others{% endif %}
">{{ t['AI Category'] }}</span>
</td>
</tr>
{% endfor %}
</table>
</div>

<script>
document.addEventListener("mousemove",e=>{
 const l=document.getElementById("light");
 l.style.left=e.pageX-140+"px";
 l.style.top=e.pageY-140+"px";
});

const labels=[{% for c in category_summary %}"{{ c[0] }}",{% endfor %}];
const values=[{% for c in category_summary %}{{ c[1] }},{% endfor %}];

new Chart(pieChart,{
 type:"pie",
 data:{labels,datasets:[{data:values,backgroundColor:["#60a5fa","#a78bfa","#34d399","#fca5a5","#9ca3af"]}]}
});
new Chart(barChart,{
 type:"bar",
 data:{labels,datasets:[{data:values,backgroundColor:"#38BDF8"}]},
 options:{plugins:{legend:{display:false}}}
});
</script>

</body>
</html>